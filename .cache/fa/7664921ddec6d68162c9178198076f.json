{"id":"QjAJ","dependencies":[{"name":"/Users/ylliu/code/lib/js/tsconfig.json","includedInParent":true,"mtime":1630489606554},{"name":"/Users/ylliu/code/lib/js/package.json","includedInParent":true,"mtime":1630495128072},{"name":"./base/variable","loc":{"line":4,"column":25},"parent":"/Users/ylliu/code/lib/js/src/run/scope.ts","resolved":"/Users/ylliu/code/lib/js/src/run/base/variable.ts"},{"name":"./global","loc":{"line":5,"column":23},"parent":"/Users/ylliu/code/lib/js/src/run/scope.ts","resolved":"/Users/ylliu/code/lib/js/src/run/global.ts"}],"generated":{"js":"var global = arguments[3];\nvar e=arguments[3];function t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.SCOPE_TYPE=exports.Scope=void 0;var r,o,n=require(\"./base/variable\"),i=require(\"./global\");!function(e){e[e.SET_CONST=0]=\"SET_CONST\",e[e.VARIABLE_NOT_FOUND=1]=\"VARIABLE_NOT_FOUND\",e[e.SET_SUCCESS=2]=\"SET_SUCCESS\"}(r||(r={})),function(e){e[e.PROGRAM=1]=\"PROGRAM\",e[e.FUNCTION=2]=\"FUNCTION\",e[e.BLOCK=3]=\"BLOCK\",e[e.FOR=4]=\"FOR\"}(o||(o={})),exports.SCOPE_TYPE=o;var a=function(){function e(e,r,o){this.parent=e,this.members={},r?!0===r||\"object\"===t(r)?this.parent=s(r):this.scopeType=r:this.scopeType=o}return e.prototype.addMember=function(e,t){this.members[e]=t},e.prototype.find=function(e){var t;return this.members[e]?this.members[e]:null===(t=this.parent)||void 0===t?void 0:t.find(e)},e.prototype.set=function(e,t){var o=this.find(e);return o?o.kind===n.VariableKind.Const?r.SET_CONST:(o.set(t),r.SET_SUCCESS):r.VARIABLE_NOT_FOUND},e}();exports.Scope=a;var s=function(e){void 0===e&&(e={});var r=new a(null);return!0===e&&(e={}),Object.entries(i.globals).forEach(function(e){var t=e[0],o=e[1];return r.addMember(t,new n.Variable(n.VariableKind.Native,t,r,o))}),\"object\"===t(e)&&Object.entries(e).forEach(function(e){var t=e[0],o=e[1];r.addMember(t,new n.Variable(n.VariableKind.Native,t,r,o))}),r};"},"sourceMaps":{"js":{"mappings":[{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":0}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":4}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":6}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":16}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":19}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":28}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":30}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":33}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":40}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":42}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":61}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":69}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":86}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":93}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":102}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":111}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":114}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":128}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":131}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":140}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":143}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":150}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":153}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":172}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":180}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":182}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":196}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":204}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":208}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":215}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":225}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":241}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":245}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":248}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":255}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":270}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":278}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":291}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":292}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":299}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":303}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":311}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":322}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":330}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":341}},{"source":"run/scope.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":343}},{"source":"run/scope.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":2,"column":347}},{"source":"run/scope.ts","name":null,"original":{"line":10,"column":5},"generated":{"line":2,"column":349}},{"source":"run/scope.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":351}},{"source":"run/scope.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":353}},{"source":"run/scope.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":361}},{"source":"run/scope.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":380}},{"source":"run/scope.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":382}},{"source":"run/scope.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":390}},{"source":"run/scope.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":403}},{"source":"run/scope.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":2,"column":412}},{"source":"run/scope.ts","name":null,"original":{"line":5,"column":4},"generated":{"line":2,"column":415}},{"source":"run/scope.ts","name":null,"original":{"line":5,"column":4},"generated":{"line":2,"column":417}},{"source":"run/scope.ts","name":null,"original":{"line":5,"column":4},"generated":{"line":2,"column":419}},{"source":"run/scope.ts","name":null,"original":{"line":5,"column":4},"generated":{"line":2,"column":429}},{"source":"run/scope.ts","name":null,"original":{"line":5,"column":4},"generated":{"line":2,"column":432}},{"source":"run/scope.ts","name":null,"original":{"line":6,"column":4},"generated":{"line":2,"column":444}},{"source":"run/scope.ts","name":null,"original":{"line":6,"column":4},"generated":{"line":2,"column":446}},{"source":"run/scope.ts","name":null,"original":{"line":6,"column":4},"generated":{"line":2,"column":448}},{"source":"run/scope.ts","name":null,"original":{"line":6,"column":4},"generated":{"line":2,"column":467}},{"source":"run/scope.ts","name":null,"original":{"line":6,"column":4},"generated":{"line":2,"column":470}},{"source":"run/scope.ts","name":null,"original":{"line":7,"column":4},"generated":{"line":2,"column":491}},{"source":"run/scope.ts","name":null,"original":{"line":7,"column":4},"generated":{"line":2,"column":493}},{"source":"run/scope.ts","name":null,"original":{"line":7,"column":4},"generated":{"line":2,"column":495}},{"source":"run/scope.ts","name":null,"original":{"line":7,"column":4},"generated":{"line":2,"column":507}},{"source":"run/scope.ts","name":null,"original":{"line":7,"column":4},"generated":{"line":2,"column":510}},{"source":"run/scope.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":524}},{"source":"run/scope.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":2,"column":525}},{"source":"run/scope.ts","name":null,"original":{"line":4,"column":5},"generated":{"line":2,"column":529}},{"source":"run/scope.ts","name":null,"original":{"line":4,"column":17},"generated":{"line":2,"column":531}},{"source":"run/scope.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":2,"column":536}},{"source":"run/scope.ts","name":null,"original":{"line":10,"column":5},"generated":{"line":2,"column":545}},{"source":"run/scope.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":2,"column":548}},{"source":"run/scope.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":2,"column":550}},{"source":"run/scope.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":2,"column":552}},{"source":"run/scope.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":2,"column":560}},{"source":"run/scope.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":2,"column":563}},{"source":"run/scope.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":2,"column":573}},{"source":"run/scope.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":2,"column":575}},{"source":"run/scope.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":2,"column":577}},{"source":"run/scope.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":2,"column":586}},{"source":"run/scope.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":2,"column":589}},{"source":"run/scope.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":2,"column":600}},{"source":"run/scope.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":2,"column":602}},{"source":"run/scope.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":2,"column":604}},{"source":"run/scope.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":2,"column":610}},{"source":"run/scope.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":2,"column":613}},{"source":"run/scope.ts","name":null,"original":{"line":14,"column":4},"generated":{"line":2,"column":621}},{"source":"run/scope.ts","name":null,"original":{"line":14,"column":4},"generated":{"line":2,"column":623}},{"source":"run/scope.ts","name":null,"original":{"line":14,"column":4},"generated":{"line":2,"column":625}},{"source":"run/scope.ts","name":null,"original":{"line":14,"column":4},"generated":{"line":2,"column":629}},{"source":"run/scope.ts","name":null,"original":{"line":14,"column":4},"generated":{"line":2,"column":632}},{"source":"run/scope.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":2,"column":638}},{"source":"run/scope.ts","name":null,"original":{"line":10,"column":5},"generated":{"line":2,"column":639}},{"source":"run/scope.ts","name":null,"original":{"line":10,"column":5},"generated":{"line":2,"column":643}},{"source":"run/scope.ts","name":null,"original":{"line":10,"column":15},"generated":{"line":2,"column":645}},{"source":"run/scope.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":2,"column":650}},{"source":"run/scope.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":2,"column":658}},{"source":"run/scope.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":2,"column":669}},{"source":"run/scope.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":2,"column":671}},{"source":"run/scope.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":2,"column":675}},{"source":"run/scope.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":2,"column":677}},{"source":"run/scope.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":2,"column":688}},{"source":"run/scope.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":2,"column":697}},{"source":"run/scope.ts","name":null,"original":{"line":26,"column":16},"generated":{"line":2,"column":699}},{"source":"run/scope.ts","name":null,"original":{"line":26,"column":31},"generated":{"line":2,"column":701}},{"source":"run/scope.ts","name":null,"original":{"line":26,"column":72},"generated":{"line":2,"column":703}},{"source":"run/scope.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":2,"column":706}},{"source":"run/scope.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":2,"column":711}},{"source":"run/scope.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":2,"column":718}},{"source":"run/scope.ts","name":null,"original":{"line":28,"column":13},"generated":{"line":2,"column":720}},{"source":"run/scope.ts","name":null,"original":{"line":28,"column":13},"generated":{"line":2,"column":725}},{"source":"run/scope.ts","name":null,"original":{"line":28,"column":23},"generated":{"line":2,"column":733}},{"source":"run/scope.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":2,"column":736}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":26},"generated":{"line":2,"column":739}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":15},"generated":{"line":2,"column":743}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":52},"generated":{"line":2,"column":746}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":34},"generated":{"line":2,"column":757}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":41},"generated":{"line":2,"column":759}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":62},"generated":{"line":2,"column":762}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":67},"generated":{"line":2,"column":767}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":76},"generated":{"line":2,"column":774}},{"source":"run/scope.ts","name":null,"original":{"line":30,"column":95},"generated":{"line":2,"column":776}},{"source":"run/scope.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":2,"column":779}},{"source":"run/scope.ts","name":null,"original":{"line":31,"column":22},"generated":{"line":2,"column":784}},{"source":"run/scope.ts","name":null,"original":{"line":31,"column":34},"generated":{"line":2,"column":794}},{"source":"run/scope.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":2,"column":796}},{"source":"run/scope.ts","name":null,"original":{"line":32,"column":20},"generated":{"line":2,"column":801}},{"source":"run/scope.ts","name":null,"original":{"line":32,"column":32},"generated":{"line":2,"column":811}},{"source":"run/scope.ts","name":null,"original":{"line":51,"column":0},"generated":{"line":2,"column":813}},{"source":"run/scope.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":2,"column":820}},{"source":"run/scope.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":2,"column":822}},{"source":"run/scope.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":2,"column":832}},{"source":"run/scope.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":2,"column":842}},{"source":"run/scope.ts","name":null,"original":{"line":35,"column":14},"generated":{"line":2,"column":851}},{"source":"run/scope.ts","name":null,"original":{"line":35,"column":27},"generated":{"line":2,"column":853}},{"source":"run/scope.ts","name":null,"original":{"line":36,"column":13},"generated":{"line":2,"column":856}},{"source":"run/scope.ts","name":null,"original":{"line":36,"column":13},"generated":{"line":2,"column":861}},{"source":"run/scope.ts","name":null,"original":{"line":36,"column":21},"generated":{"line":2,"column":869}},{"source":"run/scope.ts","name":null,"original":{"line":36,"column":28},"generated":{"line":2,"column":872}},{"source":"run/scope.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":2,"column":875}},{"source":"run/scope.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":2,"column":877}},{"source":"run/scope.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":2,"column":887}},{"source":"run/scope.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":2,"column":892}},{"source":"run/scope.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":2,"column":901}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":904}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":908}},{"source":"run/scope.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":2,"column":910}},{"source":"run/scope.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":2,"column":917}},{"source":"run/scope.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":2,"column":922}},{"source":"run/scope.ts","name":null,"original":{"line":40,"column":24},"generated":{"line":2,"column":930}},{"source":"run/scope.ts","name":null,"original":{"line":40,"column":37},"generated":{"line":2,"column":933}},{"source":"run/scope.ts","name":null,"original":{"line":40,"column":42},"generated":{"line":2,"column":938}},{"source":"run/scope.ts","name":null,"original":{"line":40,"column":50},"generated":{"line":2,"column":946}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":2,"column":949}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":20},"generated":{"line":2,"column":957}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":20},"generated":{"line":2,"column":959}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":25},"generated":{"line":2,"column":964}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":2,"column":978}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":2,"column":982}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":2,"column":989}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":2,"column":991}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":33},"generated":{"line":2,"column":993}},{"source":"run/scope.ts","name":null,"original":{"line":41,"column":38},"generated":{"line":2,"column":998}},{"source":"run/scope.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":2,"column":1002}},{"source":"run/scope.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":2,"column":1004}},{"source":"run/scope.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":2,"column":1014}},{"source":"run/scope.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":2,"column":1018}},{"source":"run/scope.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":2,"column":1027}},{"source":"run/scope.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":2,"column":1029}},{"source":"run/scope.ts","name":null,"original":{"line":45,"column":14},"generated":{"line":2,"column":1032}},{"source":"run/scope.ts","name":null,"original":{"line":45,"column":14},"generated":{"line":2,"column":1036}},{"source":"run/scope.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":2,"column":1038}},{"source":"run/scope.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":2,"column":1043}},{"source":"run/scope.ts","name":null,"original":{"line":45,"column":35},"generated":{"line":2,"column":1048}},{"source":"run/scope.ts","name":null,"original":{"line":46,"column":11},"generated":{"line":2,"column":1051}},{"source":"run/scope.ts","name":null,"original":{"line":46,"column":12},"generated":{"line":2,"column":1058}},{"source":"run/scope.ts","name":null,"original":{"line":47,"column":11},"generated":{"line":2,"column":1060}},{"source":"run/scope.ts","name":null,"original":{"line":47,"column":20},"generated":{"line":2,"column":1062}},{"source":"run/scope.ts","name":null,"original":{"line":47,"column":29},"generated":{"line":2,"column":1069}},{"source":"run/scope.ts","name":null,"original":{"line":47,"column":29},"generated":{"line":2,"column":1071}},{"source":"run/scope.ts","name":null,"original":{"line":47,"column":42},"generated":{"line":2,"column":1084}},{"source":"run/scope.ts","name":null,"original":{"line":47,"column":56},"generated":{"line":2,"column":1090}},{"source":"run/scope.ts","name":null,"original":{"line":47,"column":69},"generated":{"line":2,"column":1092}},{"source":"run/scope.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":2,"column":1103}},{"source":"run/scope.ts","name":null,"original":{"line":48,"column":17},"generated":{"line":2,"column":1105}},{"source":"run/scope.ts","name":null,"original":{"line":48,"column":21},"generated":{"line":2,"column":1109}},{"source":"run/scope.ts","name":null,"original":{"line":49,"column":15},"generated":{"line":2,"column":1112}},{"source":"run/scope.ts","name":null,"original":{"line":49,"column":28},"generated":{"line":2,"column":1114}},{"source":"run/scope.ts","name":null,"original":{"line":46,"column":29},"generated":{"line":2,"column":1127}},{"source":"run/scope.ts","name":null,"original":{"line":46,"column":42},"generated":{"line":2,"column":1129}},{"source":"run/scope.ts","name":null,"original":{"line":51,"column":0},"generated":{"line":2,"column":1149}},{"source":"run/scope.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":2,"column":1151}},{"source":"run/scope.ts","name":null,"original":{"line":65,"column":4},"generated":{"line":2,"column":1154}},{"source":"run/scope.ts","name":null,"original":{"line":65,"column":4},"generated":{"line":2,"column":1162}},{"source":"run/scope.ts","name":null,"original":{"line":65,"column":4},"generated":{"line":2,"column":1168}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":2,"column":1170}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":2,"column":1174}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":27},"generated":{"line":2,"column":1176}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":2,"column":1185}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":2,"column":1193}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":2,"column":1197}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":2,"column":1201}},{"source":"run/scope.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":2,"column":1203}},{"source":"run/scope.ts","name":null,"original":{"line":54,"column":10},"generated":{"line":2,"column":1207}},{"source":"run/scope.ts","name":null,"original":{"line":54,"column":10},"generated":{"line":2,"column":1211}},{"source":"run/scope.ts","name":null,"original":{"line":54,"column":24},"generated":{"line":2,"column":1213}},{"source":"run/scope.ts","name":null,"original":{"line":54,"column":28},"generated":{"line":2,"column":1217}},{"source":"run/scope.ts","name":null,"original":{"line":54,"column":34},"generated":{"line":2,"column":1219}},{"source":"run/scope.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":2,"column":1225}},{"source":"run/scope.ts","name":null,"original":{"line":55,"column":18},"generated":{"line":2,"column":1232}},{"source":"run/scope.ts","name":null,"original":{"line":55,"column":7},"generated":{"line":2,"column":1236}},{"source":"run/scope.ts","name":null,"original":{"line":55,"column":24},"generated":{"line":2,"column":1240}},{"source":"run/scope.ts","name":null,"original":{"line":55,"column":33},"generated":{"line":2,"column":1242}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":2,"column":1246}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":11},"generated":{"line":2,"column":1253}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":19},"generated":{"line":2,"column":1261}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":19},"generated":{"line":2,"column":1263}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":28},"generated":{"line":2,"column":1272}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":36},"generated":{"line":2,"column":1280}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":37},"generated":{"line":2,"column":1289}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":38},"generated":{"line":2,"column":1292}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":38},"generated":{"line":2,"column":1296}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":39},"generated":{"line":2,"column":1298}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":39},"generated":{"line":2,"column":1300}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":41},"generated":{"line":2,"column":1303}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":42},"generated":{"line":2,"column":1305}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":42},"generated":{"line":2,"column":1307}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":48},"generated":{"line":2,"column":1310}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":48},"generated":{"line":2,"column":1317}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":60},"generated":{"line":2,"column":1319}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":70},"generated":{"line":2,"column":1329}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":73},"generated":{"line":2,"column":1331}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":77},"generated":{"line":2,"column":1335}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":77},"generated":{"line":2,"column":1337}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":86},"generated":{"line":2,"column":1346}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":86},"generated":{"line":2,"column":1348}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":99},"generated":{"line":2,"column":1361}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":107},"generated":{"line":2,"column":1368}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":110},"generated":{"line":2,"column":1370}},{"source":"run/scope.ts","name":null,"original":{"line":56,"column":123},"generated":{"line":2,"column":1372}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":22},"generated":{"line":2,"column":1378}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":2,"column":1389}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":2,"column":1391}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":34},"generated":{"line":2,"column":1395}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":41},"generated":{"line":2,"column":1402}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":49},"generated":{"line":2,"column":1410}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":57},"generated":{"line":2,"column":1413}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":65},"generated":{"line":2,"column":1421}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":66},"generated":{"line":2,"column":1430}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":67},"generated":{"line":2,"column":1433}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":67},"generated":{"line":2,"column":1437}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":68},"generated":{"line":2,"column":1439}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":68},"generated":{"line":2,"column":1441}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":70},"generated":{"line":2,"column":1444}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":71},"generated":{"line":2,"column":1446}},{"source":"run/scope.ts","name":null,"original":{"line":57,"column":71},"generated":{"line":2,"column":1448}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":2,"column":1451}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":20},"generated":{"line":2,"column":1453}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":30},"generated":{"line":2,"column":1463}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":34},"generated":{"line":2,"column":1465}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":38},"generated":{"line":2,"column":1469}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":38},"generated":{"line":2,"column":1471}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":47},"generated":{"line":2,"column":1480}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":47},"generated":{"line":2,"column":1482}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":60},"generated":{"line":2,"column":1495}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":68},"generated":{"line":2,"column":1502}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":71},"generated":{"line":2,"column":1504}},{"source":"run/scope.ts","name":null,"original":{"line":58,"column":84},"generated":{"line":2,"column":1506}},{"source":"run/scope.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":2,"column":1512}}],"sources":{"run/scope.ts":"import { Variable, VariableKind } from './base/variable'\nimport { globals } from './global'\n\nenum SET_OPE_CODE {\n    SET_CONST,\n    VARIABLE_NOT_FOUND,\n    SET_SUCCESS\n}\n\nenum SCOPE_TYPE {\n    PROGRAM = 1,\n    FUNCTION,\n    BLOCK,\n    FOR\n}\nclass Scope {\n    parent: Scope | null\n    members: object\n    $this: Scope\n    scopeType: SCOPE_TYPE\n\n    constructor(parent: Scope)\n    constructor(parent: Scope, scopeType: SCOPE_TYPE)\n    constructor(parent: Scope, global: boolean | object)\n    constructor(parent: Scope, global: boolean | object, scopeType: SCOPE_TYPE)\n    constructor(parent: Scope, global ?: object | SCOPE_TYPE | boolean, scopeType ?: SCOPE_TYPE) {\n        this.parent = parent\n        this.members = {}\n        if(global) {\n            if(global === true || typeof global === 'object') this.parent = globalScopeFactory(global)\n            else this.scopeType = global\n        } else this.scopeType = scopeType\n    }\n\n    addMember(tag: string, member: Variable) {\n        this.members[tag] = member\n    }\n\n    find(tag: string): Variable | null {\n        if(this.members[tag]) return this.members[tag]\n        else return this.parent?.find(tag)\n    }\n\n    set(tag, val): SET_OPE_CODE {\n        const variable = this.find(tag)\n        if(!variable) return SET_OPE_CODE.VARIABLE_NOT_FOUND\n        if(variable.kind === VariableKind.Const) return SET_OPE_CODE.SET_CONST\n        variable.set(val)\n        return SET_OPE_CODE.SET_SUCCESS\n    }\n}\n\nconst globalScopeFactory = (global: Object = {}) => {\n    const globalScope = new Scope(null)\n    if(global === true) global = {}\n    Object.entries(globals).forEach(([n, v]) => globalScope.addMember(n, new Variable(VariableKind.Native, n, globalScope, v)))\n    typeof global === 'object' && Object.entries(global).forEach(([n, v]) => {\n        globalScope.addMember(n,  new Variable(VariableKind.Native, n, globalScope, v))\n    })\n    \n    return globalScope\n}\n\nexport {\n    Scope,\n    SCOPE_TYPE\n}"},"lineCount":null}},"error":null,"hash":"ceaef1e5604d5c431c2c16aadb5c84d0","cacheData":{"env":{}}}