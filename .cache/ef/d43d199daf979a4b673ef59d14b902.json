{"id":"rBYc","dependencies":[{"name":"/Users/ylliu/code/lib/js/tsconfig.json","includedInParent":true,"mtime":1630489606554},{"name":"/Users/ylliu/code/lib/js/package.json","includedInParent":true,"mtime":1630495128072},{"name":"path","loc":{"line":6,"column":37},"parent":"/Users/ylliu/code/lib/js/src/module/require.ts","resolved":"/Users/ylliu/code/lib/js/node_modules/path-browserify/index.js"},{"name":"fs","loc":{"line":7,"column":35},"parent":"/Users/ylliu/code/lib/js/src/module/require.ts","resolved":"/Users/ylliu/code/lib/js/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"..","loc":{"line":8,"column":18},"parent":"/Users/ylliu/code/lib/js/src/module/require.ts","resolved":"/Users/ylliu/code/lib/js/src/index.ts"},{"name":"../run/scope","loc":{"line":9,"column":22},"parent":"/Users/ylliu/code/lib/js/src/module/require.ts","resolved":"/Users/ylliu/code/lib/js/src/run/scope.ts"}],"generated":{"js":"\"use strict\";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,\"__esModule\",{value:!0});var r=e(require(\"path\")),t=e(require(\"fs\")),u=require(\"..\"),i=require(\"../run/scope\"),n={},o=function e(o,_){var a=r.default.resolve(o,_);if(n[a])return n[a];if(!t.default.existsSync(a))throw Error(\"require module: \"+_+\" is not exist in path :\"+a);var s=t.default.readFileSync(a).toString(),f={__inner_require__:function(r){return e(a,r)},__inner_export__:function(e,r){d[e]=r},__dirname:a},l=new i.Scope(null,f),d={};return n[a]=d,u.parseAST(s,{},l),n[a]};exports.default=o;"},"sourceMaps":{"js":{"mappings":[{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":0}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":13}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":17}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":19}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":25}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":30}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":47}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":56}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":59}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":66}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":69}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":71}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":82}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":84}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":85}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":93}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":97}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":104}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":119}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":127}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":140}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":141}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":148}},{"source":"module/require.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":152}},{"source":"module/require.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":156}},{"source":"module/require.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":158}},{"source":"module/require.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":160}},{"source":"module/require.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":168}},{"source":"module/require.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":177}},{"source":"module/require.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":179}},{"source":"module/require.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":181}},{"source":"module/require.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":189}},{"source":"module/require.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":196}},{"source":"module/require.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":198}},{"source":"module/require.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":206}},{"source":"module/require.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":212}},{"source":"module/require.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":214}},{"source":"module/require.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":222}},{"source":"module/require.ts","name":null,"original":{"line":6,"column":6},"generated":{"line":1,"column":238}},{"source":"module/require.ts","name":null,"original":{"line":6,"column":52},"generated":{"line":1,"column":240}},{"source":"module/require.ts","name":null,"original":{"line":8,"column":6},"generated":{"line":1,"column":243}},{"source":"module/require.ts","name":null,"original":{"line":8,"column":17},"generated":{"line":1,"column":245}},{"source":"module/require.ts","name":null,"original":{"line":8,"column":6},"generated":{"line":1,"column":254}},{"source":"module/require.ts","name":null,"original":{"line":8,"column":18},"generated":{"line":1,"column":256}},{"source":"module/require.ts","name":null,"original":{"line":8,"column":36},"generated":{"line":1,"column":258}},{"source":"module/require.ts","name":null,"original":{"line":9,"column":10},"generated":{"line":1,"column":261}},{"source":"module/require.ts","name":null,"original":{"line":9,"column":10},"generated":{"line":1,"column":265}},{"source":"module/require.ts","name":null,"original":{"line":9,"column":20},"generated":{"line":1,"column":267}},{"source":"module/require.ts","name":null,"original":{"line":9,"column":20},"generated":{"line":1,"column":269}},{"source":"module/require.ts","name":null,"original":{"line":9,"column":25},"generated":{"line":1,"column":277}},{"source":"module/require.ts","name":null,"original":{"line":9,"column":33},"generated":{"line":1,"column":285}},{"source":"module/require.ts","name":null,"original":{"line":9,"column":43},"generated":{"line":1,"column":287}},{"source":"module/require.ts","name":null,"original":{"line":10,"column":7},"generated":{"line":1,"column":290}},{"source":"module/require.ts","name":null,"original":{"line":10,"column":7},"generated":{"line":1,"column":293}},{"source":"module/require.ts","name":null,"original":{"line":10,"column":25},"generated":{"line":1,"column":295}},{"source":"module/require.ts","name":null,"original":{"line":11,"column":15},"generated":{"line":1,"column":298}},{"source":"module/require.ts","name":null,"original":{"line":11,"column":15},"generated":{"line":1,"column":305}},{"source":"module/require.ts","name":null,"original":{"line":11,"column":33},"generated":{"line":1,"column":307}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":7},"generated":{"line":1,"column":310}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":8},"generated":{"line":1,"column":314}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":8},"generated":{"line":1,"column":316}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":324}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":22},"generated":{"line":1,"column":335}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":32},"generated":{"line":1,"column":338}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":1,"column":344}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":44},"generated":{"line":1,"column":350}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":63},"generated":{"line":1,"column":369}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":73},"generated":{"line":1,"column":371}},{"source":"module/require.ts","name":null,"original":{"line":13,"column":99},"generated":{"line":1,"column":397}},{"source":"module/require.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":400}},{"source":"module/require.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":404}},{"source":"module/require.ts","name":null,"original":{"line":14,"column":20},"generated":{"line":1,"column":406}},{"source":"module/require.ts","name":null,"original":{"line":14,"column":20},"generated":{"line":1,"column":408}},{"source":"module/require.ts","name":null,"original":{"line":14,"column":23},"generated":{"line":1,"column":416}},{"source":"module/require.ts","name":null,"original":{"line":14,"column":36},"generated":{"line":1,"column":429}},{"source":"module/require.ts","name":null,"original":{"line":14,"column":45},"generated":{"line":1,"column":432}},{"source":"module/require.ts","name":null,"original":{"line":16,"column":10},"generated":{"line":1,"column":443}},{"source":"module/require.ts","name":null,"original":{"line":16,"column":25},"generated":{"line":1,"column":445}},{"source":"module/require.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":446}},{"source":"module/require.ts","name":null,"original":{"line":17,"column":27},"generated":{"line":1,"column":464}},{"source":"module/require.ts","name":null,"original":{"line":17,"column":28},"generated":{"line":1,"column":473}},{"source":"module/require.ts","name":null,"original":{"line":18,"column":19},"generated":{"line":1,"column":476}},{"source":"module/require.ts","name":null,"original":{"line":18,"column":19},"generated":{"line":1,"column":483}},{"source":"module/require.ts","name":null,"original":{"line":18,"column":28},"generated":{"line":1,"column":485}},{"source":"module/require.ts","name":null,"original":{"line":18,"column":37},"generated":{"line":1,"column":487}},{"source":"module/require.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":491}},{"source":"module/require.ts","name":null,"original":{"line":20,"column":26},"generated":{"line":1,"column":508}},{"source":"module/require.ts","name":null,"original":{"line":20,"column":27},"generated":{"line":1,"column":517}},{"source":"module/require.ts","name":null,"original":{"line":20,"column":41},"generated":{"line":1,"column":519}},{"source":"module/require.ts","name":null,"original":{"line":21,"column":12},"generated":{"line":1,"column":522}},{"source":"module/require.ts","name":null,"original":{"line":21,"column":25},"generated":{"line":1,"column":524}},{"source":"module/require.ts","name":null,"original":{"line":21,"column":33},"generated":{"line":1,"column":527}},{"source":"module/require.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":530}},{"source":"module/require.ts","name":null,"original":{"line":23,"column":19},"generated":{"line":1,"column":540}},{"source":"module/require.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":1,"column":543}},{"source":"module/require.ts","name":null,"original":{"line":26,"column":24},"generated":{"line":1,"column":545}},{"source":"module/require.ts","name":null,"original":{"line":26,"column":28},"generated":{"line":1,"column":549}},{"source":"module/require.ts","name":null,"original":{"line":26,"column":28},"generated":{"line":1,"column":551}},{"source":"module/require.ts","name":null,"original":{"line":26,"column":34},"generated":{"line":1,"column":557}},{"source":"module/require.ts","name":null,"original":{"line":26,"column":40},"generated":{"line":1,"column":562}},{"source":"module/require.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":1,"column":565}},{"source":"module/require.ts","name":null,"original":{"line":27,"column":25},"generated":{"line":1,"column":567}},{"source":"module/require.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":570}},{"source":"module/require.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":1,"column":577}},{"source":"module/require.ts","name":null,"original":{"line":28,"column":22},"generated":{"line":1,"column":579}},{"source":"module/require.ts","name":null,"original":{"line":28,"column":33},"generated":{"line":1,"column":582}},{"source":"module/require.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":1,"column":584}},{"source":"module/require.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":1,"column":586}},{"source":"module/require.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":595}},{"source":"module/require.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":1,"column":597}},{"source":"module/require.ts","name":null,"original":{"line":30,"column":26},"generated":{"line":1,"column":600}},{"source":"module/require.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":603}},{"source":"module/require.ts","name":null,"original":{"line":31,"column":29},"generated":{"line":1,"column":605}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":609}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":617}},{"source":"module/require.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":1,"column":625}}],"sources":{"module/require.ts":"import path from 'path'\nimport fs from 'fs'\nimport { parseAST } from '..'\nimport { Variable } from '../run/base/variable'\nimport { Scope } from '../run/scope'\nconst globalModuleCache: {[path: string]: object} = {}\n\nconst require2 = (selfPath: string, modulePath: string) => {\n    const absPath = path.resolve(selfPath, modulePath)\n    if(globalModuleCache[absPath]) {\n        return globalModuleCache[absPath]\n    } \n    if(!fs.existsSync(absPath)) throw Error(`require module: ${modulePath} is not exist in path :${absPath}`)\n    const content = fs.readFileSync(absPath).toString()\n    \n    const moduleGlobal = {\n        __inner_require__: (modulePath: string) => {\n            return require2(absPath, modulePath)\n        },\n        __inner_export__: (name: string, value: Variable) => {\n            moduleExport[name] = value\n        },\n        __dirname: absPath\n    }\n    \n    const moduleScope = new Scope(null, moduleGlobal)\n    const moduleExport = {}\n    globalModuleCache[absPath] = moduleExport\n\n    parseAST(content, {}, moduleScope)\n    return globalModuleCache[absPath]\n}\n\nexport default require2\n"},"lineCount":null}},"error":null,"hash":"b2e8f62439f290a2f4e558f682a91e5d","cacheData":{"env":{}}}